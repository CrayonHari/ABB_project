<div class="wrapper">
  <app-file-drop
    (fileDropped)="handleFile($event)"
    (fileInfo)="onFileInfoReceived($event)"
    *ngIf="!isLoading && !isUploaded"
  ></app-file-drop>

  <div class="loader-wrapper" *ngIf="isLoading">
    <app-loader
      [overlay]="false"
      [message]="'Uploading dataset...'"
    ></app-loader>
  </div>
  <div *ngIf="uploadResult && isUploaded" class="upload-result-flex">
    <div class="upload-box">
      <p class="box-title">File Name</p>
      <p class="box-data">{{ fileName }}</p>
      <p class="box-title">File Size</p>
      <p class="box-data">{{ fileSize }} KB</p>
    </div>

    <div class="upload-box">
      <p class="box-title">Total Records</p>
      <p class="box-data">{{ uploadResult.totalRecords }}</p>
    </div>

    <div class="upload-box">
      <p class="box-title">Columns</p>
      <p class="box-data">{{ uploadResult.columnCount }}</p>
    </div>

    <div class="upload-box">
      <p class="box-title">Date Range</p>
      <p class="box-data">
        {{ formatDateDisplay(uploadResult.dateRangeStart) }}
      </p>
      <p class="box-data">{{ formatDateDisplay(uploadResult.dateRangeEnd) }}</p>
    </div>

    <div class="upload-box">
      <p class="box-title">Pass Rate</p>
      <p class="box-data">{{ uploadResult.passRate }}%</p>
    </div>
  </div>
  <app-errorsuccessbox
    *ngIf="showAlert"
    [type]="alertType"
    [message]="alertMessage"
  >
  </app-errorsuccessbox>

  <app-button
    type="primary"
    [disabled]="isLoading"
    [label]="isLoading ? 'Uploading...' : isUploaded ? 'Next' : 'Upload'"
    (click)="isUploaded ? onNextClicked() : uploadFile()"
    style="margin-left: auto"
  ></app-button>
</div>
